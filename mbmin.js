function MB(f,n,q,b){if(typeof f=="string"){f=new Array(f)}if(this.mbSupport()){for(z=0;z<f.length;z++){if(typeof f[z]=="string"){el=document.getElementById(f[z])}else{el=f[z]}var g=this.getComputedStyle(el,"backgroundColor");el.style.background=n.join(", ");el.style.backgroundColor=g}return true}for(z=0;z<f.length;z++){canvas=document.createElement("canvas");if(typeof f[z]=="string"){el=document.getElementById(f[z])}else{el=f[z]}canvas.id="_canvas";var n=n;var p=this.getComputedStyle(el,"position");var r=this.getComputedStyle(el,"paddingTop");var e=this.getComputedStyle(el,"paddingLeft");var k=this.getComputedStyle(el,"position");var a=this.getComputedStyle(el,"backgroundColor");var d=el.childNodes.length;for(y=0;y<d;y++){if(el.childNodes[y].id=="_canvas"){canvas=el.childNodes[y];var o=true}}if(q=="relative"){canvas.style.position="relative";canvas.width=el.offsetWidth;canvas.height=el.offsetHeight;canvas.style.top=-p-r+"px";canvas.style.left=-e+"px";canvas.style.marginBottom=-(p+r)+"px";el.style.height=p+"px"}else{if(k==""&&k!="fixed"||k=="static"){el.style.position="relative"}canvas.style.position="absolute";canvas.width=el.offsetWidth;canvas.height=el.offsetHeight;canvas.style.top="0px";canvas.style.left="0px"}canvas.style.zIndex="0";if(!o){var c=document.createElement("div");c.style.zIndex="1";c.style.position="relative";var d=el.childNodes.length;el.appendChild(c);for(y=0;y<d;y++){c.appendChild(el.firstChild)}if(/msie/i.test(navigator.userAgent)){el.appendChild(canvas);G_vmlCanvasManager.initElement(canvas);canvas=document.getElementById(f[z]+"_canvas")}}var h=[];var m=new RegExp(/url\((.*)\)/);var l=this;for(x=0;x<n.length;x++){h[x]=new Image();h[x].drawme=function(){if(this.complete){var s=l.css(n[h.indexOf(this)]);l.draw(el,s,this,canvas);var t=h.indexOf(this)-1;if(t>0||t==0){h[t].drawme()}else{l.exportToPNG(canvas,el)}}else{this.onload=function(){var u=l.css(n[h.indexOf(this)]);l.draw(el,u,this,canvas);var v=h.indexOf(this)-1;if(v>0||v==0){h[v].drawme()}else{l.exportToPNG(canvas,el)}}}};h[x].src=m.exec(n[x])[1]}h[n.length-1].drawme()}if(b){window.onresize=function(){new MB(f,n,q)}}}MB.prototype.draw=function(b,o,e,p){var p=p.getContext("2d");var g=b.offsetWidth;var h=b.offsetHeight;switch(o.repeat){case"no-repeat":var m=this.calculateX(o,g,e);var k=this.calculateY(o,h,e);p.drawImage(e,m,k,e.width,e.height);break;case"repeat-y":var f=Math.ceil(h/e.height)+1;var m=this.calculateX(o,g,e);var d=this.calculateMinusY(o,h,e,f);for(i=0;i<(f);i++){p.drawImage(e,m,(i*e.height)-d,e.width,e.height)}break;case"repeat-x":var f=Math.ceil(g/e.width)+1;var d=this.calculateMinusX(o,g,e,f);var k=this.calculateY(o,h,e);for(i=0;i<(f);i++){p.drawImage(e,(i*e.width)-d,k,e.width,e.height)}break;default:var c=Math.ceil(g/e.width)+1;var a=Math.ceil(h/e.height)+1;var n=this.calculateMinusX(o,g,e,c);var l=this.calculateMinusY(o,h,e,a);for(i=0;i<(c);i++){for(j=0;j<(a);j++){p.drawImage(e,(i*e.width)-n,(j*e.height)-l,e.width,e.height)}}}};MB.prototype.css=function(a){var b=new Object();var c=[0,0];c=new RegExp(/([\d]*)px ([\d]*)/).exec(a);a.split(" ").forEach(function(e,d,f){switch(e){case"no-repeat":b.repeat="no-repeat";break;case"repeat-x":b.repeat="repeat-x";break;case"repeat-y":b.repeat="repeat-y";break;default:if(!(c&&c[2]+"px")&&!(c&&c[1]+"px")){b[e]=true}}});if(c){if(c[1]&&(b.right||b.left)){b.y=c[1]}else{if(c[1]&&(cssbg.top||cssbg.bottom)){b.x=c[1]}}if(b.center&&a.indexOf(" center")<c.index){b.y=c[1]}else{if(b.center&&a.indexOf(" center")>c.index){b.x=c[1]}}if(c[1]&&c[2]){b.x=c[1];b.y=c[2]}}b.centerY=(b.center&&!b.top&&!b.bottom&&!b.y)?true:false;b.centerX=(b.center&&!b.right&&!b.left&&!b.x)?true:false;return b};MB.prototype.calculateX=function(c,a,b){return(c.left)?0:(c.right)?a-b.width:(c.centerX)?(a/2)-(b.width/2):(c.x)?parseFloat(c.x):false};MB.prototype.calculateY=function(b,c,a){return(b.top)?0:(b.bottom)?c-a.height:(b.centerY)?(c/2)-(a.height/2):(b.y)?parseFloat(b.y):false};MB.prototype.calculateMinusY=function(b,d,a,c){return(b.top)?0:(b.bottom)?c*a.height-d:(b.centerY)?(c*a.height-d)/2:(b.y)?a.height-parseFloat(b.y):false};MB.prototype.calculateMinusX=function(c,a,b,d){return(c.left)?0:(c.right)?d*b.width-a:(c.centerX)?(d*b.width-a)/2:(c.x)?b.width-parseFloat(c.x):false};MB.prototype.getComputedStyle=function(a,c){if(a.currentStyle){return a.currentStyle[c]}var b=document.defaultView.getComputedStyle(a,null);return(b)?b.getPropertyValue([c.hyphenate()]):null};MB.prototype.exportToPNG=function(a,b){try{a.toDataURL();b.style.background=backgroundcolor+" url("+sDataUrl+")"}catch(c){b.appendChild(a)}};MB.prototype.mbSupport=function(){var a=document.createElement("div");a.style.background="url() top no-repeat, url() bottom no-repeat";if(a.style.background){return true}else{return false}};Array.prototype.forEach=function(c,d){for(var b=0,a=this.length;b<a;b++){c.call(d,this[b],b,this)}};String.prototype.hyphenate=function(){return this.replace(/[A-Z]/g,function(a){return("-"+a.charAt(0).toLowerCase())})};